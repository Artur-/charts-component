<!--
@license
Vaadin Charts

Copyright (C) 2015 Vaadin Ltd

This program is available under Commercial Vaadin Add-On License 3.0 (CVALv3).

See the file LICENSE.md distributed with this software for more information about licensing.

See <a href="https://vaadin.com/license/cval-3">the website</a> for the complete license.
-->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="v-chart.html">

<!--
An element that helps creating <a href="https://en.wikipedia.org/wiki/Sparkline">Sparklines</a>.
Uses vaadin-charts elements.

Example:

<vaadin-sparkline data="10, 20, 14, 12, 30, 50, 80, 2"></vaadin-sparkline>

-->
<dom-module id="vaadin-sparkline">

    <template>
        <v-chart id="chart" type="line">
            <vc-title text="null"></vc-title>

            <vc-chart margin="0" spacing="0" background-color="null">
            </vc-chart>

            <vc-exporting enabled="false"></vc-exporting>

            <vc-plot-options>
                <vc-line enable-mouse-tracking="false"
                         show-in-legend="false"
                         animation="false"
                         shadow="false">
                    <vc-marker enabled="false"></vc-marker>
                </vc-line>
            </vc-plot-options>

            <vc-x-axis line-width="0"
                       minor-grid-line-width="0"
                       minor-tick-length="0"
                       minor-tick-width="0"
                       grid-line-width="0"
                       title="null"
                       max-padding="0"
                       min-padding="0"
                       start-on-tick="false"
                       end-on-tick="false">
                <vc-labels enabled="false"></vc-labels>
            </vc-x-axis>

            <vc-y-axis line-width="0"
                       minor-grid-line-width="0"
                       minor-tick-length="0"
                       minor-tick-width="0"
                       grid-line-width="0"
                       title="null"
                       max-padding="0.1"
                       min-padding="0.1"
                       start-on-tick="false"
                       end-on-tick="false">
                <vc-labels enabled="false"></vc-labels>
            </vc-y-axis>

            <data-series type="line" data="[[_arrayData]]"></data-series>
        </v-chart>

    </template>


    <script>
        VaadinSparkline = Polymer({
            is: 'vaadin-sparkline',

            properties: {
                /**
                 * Data contents of the sparkline. The sparkline is updated when this changes
                 *
                 */
                data: String,

                /**
                 * Array representation of the data contents, to allow setting the values
                 * as comma separated numbers.
                 *
                 * @private
                 */
                arrayData: {
                    type: Array,
                    computed: '_arrayFromData(data)'
                }
            },

            /**
             * Force a String to be a JS array.
             *
             * @param data
             * @private
             */
            _arrayFromData: function (data) {
                return JSON.parse('[' + data + ']');
            }
        });

    </script>
</dom-module>
